<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For You, With Love üíù</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Quicksand:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* ===== RESET & VARIABLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        :root {
            --bg-gradient: linear-gradient(135deg, #0f051d 0%, #2d1b3a 100%);
            --primary-pink: #ff4d6d;
            --soft-pink: #ff85a2;
            --card-bg: rgba(20, 10, 30, 0.7);
            --gold: #ffd700;
            --text-light: #ffffff;
            --text-muted: rgba(255, 255, 255, 0.85);
        }

        /* ===== BASE STYLES ===== */
        body {
            font-family: 'Quicksand', sans-serif;
            background: var(--bg-gradient);
            color: var(--text-light);
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* ===== BACKGROUND HEARTS ===== */
        .bg-hearts {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }
        .bg-hearts span {
            position: absolute;
            color: rgba(255, 133, 162, 0.25);
            font-size: 20px;
            animation: float 8s infinite ease-in-out;
            user-select: none;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-40px) rotate(15deg); }
        }

        /* ===== SECTION & CARD STYLES ===== */
        .section {
            position: absolute;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.6s ease, visibility 0.6s;
            padding: 20px;
        }
        .section.active {
            opacity: 1;
            visibility: visible;
        }
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 40px;
            padding: clamp(25px, 6vw, 50px);
            max-width: 550px;
            width: 100%;
            text-align: center;
            border: 2px solid rgba(255, 133, 162, 0.3);
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.6);
            animation: cardGlow 5s infinite alternate;
        }
        @keyframes cardGlow {
            0% { box-shadow: 0 25px 40px rgba(255, 77, 109, 0.2); border-color: rgba(255, 133, 162, 0.3); }
            100% { box-shadow: 0 25px 70px rgba(255, 77, 109, 0.5); border-color: rgba(255, 255, 255, 0.4); }
        }

        /* ===== TYPOGRAPHY ===== */
        h1 {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2.8rem, 10vw, 4.5rem);
            margin-bottom: 15px;
            background: linear-gradient(45deg, #fff, var(--soft-pink), #fff);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shine 4s linear infinite;
        }
        @keyframes shine { to { background-position: 200% center; } }
        h2 {
            font-size: clamp(1.3rem, 4vw, 2rem);
            margin-bottom: 20px;
            color: var(--soft-pink);
            font-weight: 600;
        }
        p {
            font-size: clamp(1rem, 3vw, 1.2rem);
            line-height: 1.7;
            margin-bottom: 25px;
            color: var(--text-muted);
        }

        /* ===== BUTTONS ===== */
        .btn {
            background: linear-gradient(45deg, #ff4d6d, #ff85a2);
            border: none;
            padding: 14px 32px;
            border-radius: 60px;
            color: white;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(255, 77, 109, 0.4);
            margin: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .btn:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 12px 30px rgba(255, 77, 109, 0.7);
            background: linear-gradient(45deg, #ff758c, #ff4d6d);
        }
        .btn:active { transform: scale(0.97); }
        .btn-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
            align-items: center;
        }
        @media (min-width: 500px) { .btn-group { flex-direction: row; justify-content: center; } }

        /* ===== SPECIAL ELEMENTS ===== */
        .heart-vault {
            font-size: clamp(6rem, 25vw, 9rem);
            cursor: pointer;
            animation: bounce 2.2s infinite;
            filter: drop-shadow(0 0 25px var(--soft-pink));
            margin: 15px 0;
            display: inline-block;
        }
        @keyframes bounce { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-25px); } }

        .memories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }
        .memory-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 25px;
            padding: 20px 10px;
            border: 1px solid rgba(255, 133, 162, 0.3);
            transition: 0.3s;
            cursor: pointer;
        }
        .memory-card:hover {
            transform: translateY(-8px);
            background: rgba(255, 133, 162, 0.15);
        }
        .memory-emoji { font-size: 3rem; margin-bottom: 10px; }
        .memory-card h3 { font-size: 1.1rem; margin-bottom: 5px; color: #fff; }
        .memory-card p { font-size: 0.85rem; margin: 0; line-height: 1.4; }

        /* ===== FLOATING EMOJIS ===== */
        .floating-emoji {
            position: absolute;
            font-size: 2.5rem;
            pointer-events: none;
            z-index: 1000;
            animation: floatUp 3.5s ease-out forwards;
        }
        @keyframes floatUp {
            0% { transform: translateY(0) scale(0.5) rotate(0deg); opacity: 0; }
            20% { opacity: 1; }
            100% { transform: translateY(-180px) scale(1.8) rotate(25deg); opacity: 0; }
        }

        /* ===== GIF OVERLAY ===== */
        .gif-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(12px);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .gif-content {
            background: #1a0b2e;
            padding: 30px;
            border-radius: 40px;
            border: 3px solid var(--soft-pink);
            max-width: 450px;
            width: 100%;
            text-align: center;
        }

        /* ===== MUSIC TOGGLE ===== */
        .music-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(8px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.3s;
        }
        .music-toggle.playing {
            background: var(--primary-pink);
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse { 0%,100% { box-shadow: 0 0 15px #ff4d6d; } 50% { box-shadow: 0 0 30px #ff85a2; } }

        /* Hidden YouTube Player */
        #youtube-player { position: absolute; width: 0; height: 0; visibility: hidden; }

        /* ===== PHOTO FRAME ===== */
        .photo-frame {
            width: 200px; height: 200px;
            margin: 20px auto;
            border-radius: 50%;
            border: 5px solid var(--soft-pink);
            overflow: hidden;
            box-shadow: 0 0 50px rgba(255, 77, 109, 0.7);
        }
        .photo-frame img { width: 100%; height: 100%; object-fit: cover; }

        /* ===== PROGRESS BAR ===== */
        .progress-bar {
            position: fixed;
            bottom: 0; left: 0;
            height: 5px;
            background: linear-gradient(90deg, #ff4d6d, #ffd700);
            width: 0%;
            transition: width 0.4s ease;
            z-index: 1000;
        }

        /* ===== MUSIC STATUS ===== */
        .music-status {
            position: fixed;
            bottom: 20px; right: 20px;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            padding: 8px 18px;
            border-radius: 40px;
            font-size: 0.9rem;
            color: rgba(255,255,255,0.9);
            border: 1px solid rgba(255,255,255,0.2);
            z-index: 999;
        }
    </style>
</head>
<body>
    <!-- Progress Bar -->
    <div class="progress-bar" id="progressBar"></div>

    <!-- Music Toggle & Status -->
    <button class="music-toggle" id="musicToggle" onclick="toggleMusic()">üéµ</button>
    <div class="music-status" id="musicStatus">üéµ Click to play "Perfect"</div>

    <!-- Hidden YouTube Player (API will load here) -->
    <div id="youtube-player"></div>

    <!-- GIF Overlay (Play Hard to Get) -->
    <div class="gif-overlay" id="gifOverlay">
        <div class="gif-content">
            <h2 style="font-family: 'Dancing Script';">Nice try, Gorgeous! üíï</h2>
            <div class="tenor-gif-embed" data-postid="4931412049723616980" data-share-method="host" data-width="100%"></div>
            <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
            <button class="btn" onclick="closeGif()" style="margin-top: 20px;">You caught me! ü•∞</button>
        </div>
    </div>

    <!-- Background Hearts Container -->
    <div class="bg-hearts" id="bgHearts"></div>

    <!-- SECTIONS (The Love Story) -->
    <section class="section active" id="landing">
        <div class="card">
            <h1>Hey Beautiful! ‚ú®</h1>
            <p>I made a little digital magic just for you. Ready to peek into my heart?</p>
            <!-- This button now starts the music AND navigates -->
            <button class="btn" onclick="startJourneyAndPlayMusic()">Open My Heart üíù</button>
        </div>
    </section>

    <section class="section" id="vault">
        <div class="card">
            <h2>üîê Secret Vault</h2>
            <div class="heart-vault" onclick="nextSection('smitten')">üíé</div>
            <p>Tap the diamond to see what's inside...</p>
        </div>
    </section>

    <section class="section" id="smitten">
        <div class="card">
            <h1>Totally Smitten ü•∞</h1>
            <p>You've completely taken over my thoughts. Every message from you makes my day instantly brighter!</p>
            <button class="btn" onclick="nextSection('memories')">Show Me More ‚ú®</button>
        </div>
    </section>

    <section class="section" id="memories">
        <div class="card">
            <h1>Celestial Moments ‚ú®</h1>
            <div class="memories">
                <div class="memory-card" onclick="createFloatingEmojis(['ü•∞', 'üíï', '‚ú®'])">
                    <div class="memory-emoji">ü´†</div>
                    <h3>Your Smile</h3>
                    <p>My favorite view</p>
                </div>
                <div class="memory-card" onclick="createFloatingEmojis(['üí´', '‚≠ê', 'üåü'])">
                    <div class="memory-emoji">üí´</div>
                    <h3>Your Energy</h3>
                    <p>Out of this world</p>
                </div>
                <div class="memory-card" onclick="createFloatingEmojis(['üíñ', '‚ù§Ô∏è', 'üíó'])">
                    <div class="memory-emoji">üíù</div>
                    <h3>Your Heart</h3>
                    <p>Pure gold</p>
                </div>
            </div>
            <button class="btn" onclick="nextSection('forgive')">One More Thing... ü§´</button>
        </div>
    </section>

    <section class="section" id="forgive">
        <div class="card">
            <h1>Stay with Me? üíï</h1>
            <p>I want to keep making you smile every single day.</p>
            <div class="btn-group" id="forgiveButtons">
                <button class="btn" onclick="forgiveYes()">Yes, Always! ü•∞</button>
                <button class="btn" onclick="playHardToGet()">Play Hard to Get üòã</button>
            </div>
            <div id="countdown" style="display: none;">
                <h2>Get ready...</h2>
                <h1 id="timer" style="font-size: 5rem;">3</h1>
            </div>
        </div>
    </section>

    <section class="section" id="valentine">
        <div class="card">
            <h1>Be My Valentine? üíò</h1>
            <p>Let's make this the start of something unforgettable.</p>
            <div class="btn-group">
                <button class="btn" onclick="valentineYes()">A Thousand Times Yes! üòç</button>
                <button class="btn" onclick="playHardToGet()">Make me work for it ü§≠</button>
            </div>
        </div>
    </section>

    <section class="section" id="celebration">
        <div class="card" style="background: rgba(255, 77, 109, 0.15); border-color: var(--gold);">
            <h1 style="margin-bottom: 0;">You're Mine!</h1>
            <h2 style="color: var(--gold);">FOREVER & ALWAYS</h2>
            <div class="photo-frame">
                <img src="https://images.unsplash.com/photo-1518199266791-5375a83190b7?auto=format&fit=crop&q=80&w=400" alt="Couple">
            </div>
            <p style="font-weight: 600;">I'm the luckiest. Let's make endless memories! üíï</p>
            <div style="font-size: 3rem;">üíñ ‚ú® üëë</div>
        </div>
    </section>

    <script>
        // =============================================
        // YOUTUBE API - YOUR SPECIFIC LINK (SAcpESN_Fk4)
        // =============================================
        let ytPlayer;
        let ytReady = false;
        let isMusicPlaying = false;
        let musicStartAttempted = false; // Track if we've tried to start music

        // Load the IFrame Player API code asynchronously
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        // This function creates an <iframe> (and YouTube player) after the API code downloads
        function onYouTubeIframeAPIReady() {
            ytPlayer = new YT.Player('youtube-player', { // 'youtube-player' is the ID of the div
                videoId: 'SAcpESN_Fk4', // <<--- YOUR VIDEO ID FROM THE LINK
                playerVars: { 
                    'autoplay': 0, 
                    'controls': 0, 
                    'disablekb': 1,
                    'enablejsapi': 1,
                    'fs': 0,
                    'loop': 1,        // Enable looping
                    'modestbranding': 1,
                    'playsinline': 1,
                    'rel': 0,
                    'showinfo': 0,
                    'playlist': 'SAcpESN_Fk4' // Required for looping, same video ID
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange,
                    'onError': onPlayerError
                }
            });
        }

        function onPlayerReady(event) {
            ytReady = true;
            console.log('YouTube Player Ready');
            ytPlayer.setVolume(40); // Set comfortable volume
            updateMusicStatus('Ready to play');
            
            // If we already tried to play music (user clicked button before player was ready), play now
            if (musicStartAttempted) {
                startMusic();
            }
        }

        function onPlayerStateChange(event) {
            // Loop the video when it ends
            if (event.data === YT.PlayerState.ENDED) {
                ytPlayer.playVideo();
            }
        }

        function onPlayerError(event) {
            console.error('YouTube Error:', event.data);
            updateMusicStatus('Music unavailable');
            document.getElementById('musicToggle').style.opacity = '0.5';
        }

        // Function to start music (called by the Open My Heart button)
        function startMusic() {
            if (!ytReady || !ytPlayer) {
                // Player not ready yet, set flag to try again when ready
                musicStartAttempted = true;
                updateMusicStatus('Loading music...');
                return false;
            }
            
            try {
                // Check if already playing
                if (!isMusicPlaying) {
                    ytPlayer.playVideo();
                    isMusicPlaying = true;
                    const btn = document.getElementById('musicToggle');
                    btn.innerHTML = 'üîä';
                    btn.classList.add('playing');
                    updateMusicStatus('Now playing: Perfect');
                }
                return true;
            } catch (e) {
                console.error("Start music error:", e);
                return false;
            }
        }

        // New function for the "Open My Heart" button - starts music AND navigates
        function startJourneyAndPlayMusic() {
            // Try to start the music
            const musicStarted = startMusic();
            
            // Always navigate to the next section
            nextSection('vault');
            
            // If music couldn't start yet, show a message
            if (!musicStarted && !ytReady) {
                updateMusicStatus('Music will start when ready...');
            }
        }

        // Toggle play/pause (for the music toggle button)
        function toggleMusic() {
            const btn = document.getElementById('musicToggle');
            if (!ytReady || !ytPlayer) {
                alert("Music player is still loading. Please try again.");
                return;
            }
            try {
                if (!isMusicPlaying) {
                    ytPlayer.playVideo();
                    isMusicPlaying = true;
                    btn.innerHTML = 'üîä';
                    btn.classList.add('playing');
                    updateMusicStatus('Now playing: Perfect');
                } else {
                    ytPlayer.pauseVideo();
                    isMusicPlaying = false;
                    btn.innerHTML = 'üéµ';
                    btn.classList.remove('playing');
                    updateMusicStatus('Paused');
                }
            } catch (e) {
                console.error("Toggle error:", e);
            }
        }

        function updateMusicStatus(text) {
            const el = document.getElementById('musicStatus');
            if (el) el.textContent = isMusicPlaying ? 'üîä Now playing: Perfect' : `üéµ ${text}`;
        }

        // =============================================
        // BACKGROUND HEARTS
        // =============================================
        function createBackgroundHearts() {
            const container = document.getElementById('bgHearts');
            const symbols = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', '‚ú®', 'üå∏'];
            for (let i = 0; i < 30; i++) {
                const span = document.createElement('span');
                span.innerHTML = symbols[Math.floor(Math.random() * symbols.length)];
                span.style.left = Math.random() * 100 + '%';
                span.style.top = Math.random() * 100 + '%';
                span.style.animationDuration = (Math.random() * 6 + 4) + 's';
                span.style.fontSize = (Math.random() * 20 + 15) + 'px';
                container.appendChild(span);
            }
        }
        createBackgroundHearts();

        // =============================================
        // FLOATING EMOJIS
        // =============================================
        function createFloatingEmojis(emojis) {
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const emoji = document.createElement('div');
                    emoji.className = 'floating-emoji';
                    emoji.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
                    emoji.style.left = (Math.random() * 80 + 10) + '%';
                    emoji.style.bottom = '10%';
                    document.body.appendChild(emoji);
                    setTimeout(() => emoji.remove(), 3500);
                }, i * 120);
            }
        }

        // =============================================
        // NAVIGATION & PROGRESS
        // =============================================
        function nextSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            const sections = ['landing', 'vault', 'smitten', 'memories', 'forgive', 'valentine', 'celebration'];
            const progress = ((sections.indexOf(id) + 1) / sections.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            if (id === 'celebration') startCelebration();
        }

        function playHardToGet() { 
            document.getElementById('gifOverlay').style.display = 'flex'; 
            createFloatingEmojis(['üòò', 'üíï', '‚ú®']);
        }

        function closeGif() {
            document.getElementById('gifOverlay').style.display = 'none';
            const active = document.querySelector('.section.active').id;
            if (active === 'forgive') forgiveYes();
            else if (active === 'valentine') valentineYes();
        }

        function forgiveYes() {
            document.getElementById('forgiveButtons').style.display = 'none';
            document.getElementById('countdown').style.display = 'block';
            let count = 3;
            const timer = setInterval(() => {
                document.getElementById('timer').innerText = count;
                createFloatingEmojis(['üíñ', '‚ú®']);
                if (count === 0) { clearInterval(timer); nextSection('valentine'); }
                count--;
            }, 1000);
        }

        function valentineYes() { nextSection('celebration'); }

        function startCelebration() {
            setInterval(() => { createFloatingEmojis(['üíñ', 'üíï', '‚ú®', 'üå∏', 'üëë']); }, 700);
        }

        // =============================================
        // MOUSE SPARKLES (Desktop only)
        // =============================================
        if (window.matchMedia("(pointer: fine)").matches) {
            document.addEventListener('mousemove', (e) => {
                if (Math.random() > 0.94) {
                    const spark = document.createElement('div');
                    spark.className = 'floating-emoji';
                    spark.innerHTML = '‚ú®';
                    spark.style.fontSize = '1rem';
                    spark.style.left = e.clientX + 'px';
                    spark.style.top = e.clientY + 'px';
                    spark.style.animation = 'floatUp 1.2s forwards';
                    document.body.appendChild(spark);
                    setTimeout(() => spark.remove(), 1200);
                }
            });
        }

        // Initial progress
        document.getElementById('progressBar').style.width = '14.28%';
        console.log('üíù Made with love - featuring "Perfect" by Ed Sheeran');
    </script>
</body>
</html>
